{% extends "student/base/_content.html" %}

{% block calculate-content %}
<h3>历史文件列表</h3>
<table class="table table-hover table-striped" >
  <thead>
    <tr>
      <td>名称</td>
      <td>类型</td>
      <td>大小</td>
      <td>上传时间</td>
    </tr>
  </thead>
  <tbody>
    {%for item in files%}
    <tr id="{{item.file_id}}">
      <td>{{item.name}}</td>
      <td>{{item.file_type}}</td>
      <td>{{item.file_size}}</td>
      <td>{{item.uploadtime}}</td>
      <td>
        <span><a href="{{item.file_obj.url}}" class='btn btn-primary' target="_blank">下载</a></span>
        {% if item.enabledelete %}
        <button class="btn btn-danger" rel="file_delete" pid="{{pid}}" fid="{{item.file_id}}">
              <i class="icon-trash icon-white"></i>
              <span>删除</span>
        </button>
        {% endif %}
      </td>
    </tr>
    {%endfor%}
  </tbody>
</table><!--end history list table-->
<div class="alert fade in" id="delete-error-panel">
  <a class="close" data-dismiss="alert" href="#">x</a>
  <strong>
    <p id="delete-message"></p>
  </strong>
</div>
    {% if show_projectcompilation %}
    <div class="alert alert-error">
      <a class="close" data-dismiss="alert">x</a>
      <h4 class="alert-heading">系统提示！</h4>
      <p>你上传的文件名不包含“项目汇编”字段，请确认后再上传</p>
    </div>
    {%endif%}
    {% if show_applicationwarn %}
    <div class="alert alert-error">
      <a class="close" data-dismiss="alert">x</a>
      <h4 class="alert-heading">系统提示！</h4>
      <p>你上传的文件名不包含“申报书”字段，请确认后再上传</p>
    </div><!--end alert block-->
    {%endif%}
    {% if show_interimchecklist %}
    <div class="alert alert-error ">
      <a class="close" data-dismiss="alert">x</a>
      <h4 class="alert-heading">系统提示！</h4>
      <p>你上传的文件名不包含“中期检查表”字段，请确认后再上传</p>
    </div>
    {%endif%}
    {% if show_summary %}
    <div class="alert alert-error">
      <a class="close" data-dismiss="alert">x</a>
      <h4 class="alert-heading">系统提示！</h4>
      <p>你上传的文件名不包含“结题验收”字段，请确认后再上传</p>
    </div>
    {%endif%}
    {% if show_scoreapplication %}
    <div class="alert alert-error">
      <a class="close" data-dismiss="alert">x</a>
      <h4 class="alert-heading">系统提示！</h4>
      <p>你上传的文件名不包含“学分申请表”字段，请确认后再上传</p>
    </div>
    {%endif%}
    {% if show_other %}
    <div class="alert alert-error">
      <a class="close" data-dismiss="alert">x</a>
      <h4 class="alert-heading">系统提示！</h4>
      <p>你上传的文件名不符合要求，请确认后再上传</p>
    </div>
    {%endif%}
  <br/>
  <div class="span4" style="margin-left:0px;border: solid #3a87ad 1px;">
    <form method="POST"  action={% url student.views.file_application_view pid%} enctype="multipart/form-data">
      {% csrf_token %}
      <span class="label label-info span4" style="padding:0px;text-align: center;margin-left:0px;"><h4>申报书上传</h4></span>
      <p>上传的文件请命名为<strong>“申报书”</strong></p>
      <input type="file"  style="filter:alpha(opacity=0);padding:0px;border:0px;margin:0px;" size="1" hidefocus enctype="multipart/form-data" name="file" accept="text/csv/doc/pdf/jpg/png"/ >
      <button type="submit" class="btn btn-success start" style="margin-left:15px;" rel="fileupload_operation">
        <i class="icon-upload icon-white"></i>
        <span>上传</span>
      </button>
    </form>

  </div>
  <div class="span4" style="margin-left:10px;border: solid #3a87ad 1px;">
    <form method="POST"  action={% url student.views.file_interimchecklist_view pid%} enctype="multipart/form-data">
      {% csrf_token %}
      <span class="label label-info span4" style="padding:0px;text-align: center;margin-left:0px;"><h4>中期检查表上传</h4></span>
      <p>上传的文件请命名为<strong>“中期检查表”</strong></p>
      <input type="file"  style="filter:alpha(opacity=0);padding:0px;border:0px;margin:0px;" size="1" hidefocus enctype="multipart/form-data" name="file" accept="text/csv/doc/pdf/jpg/png"/ >
      <button type="submit" class="btn btn-success start" style="margin-left:15px;" rel="fileupload_operation">
        <i class="icon-upload icon-white"></i>
        <span>上传</span>
      </button>
    </form>
  </div>

 <div class="span4" style="margin-left:10px;border: solid #3a87ad 1px;">
    <form method="POST"  action={% url student.views.file_summary_view pid%} enctype="multipart/form-data">
      {% csrf_token %}
      <span class="label label-info span4" style="padding:0px;text-align: center;margin-left:0px;"><h4>结题验收表上传</h4></span>
      <p>上传的文件请命名为<strong>“结题验收表”</strong></p>
      <input type="file"  style="filter:alpha(opacity=0);padding:0px;border:0px;margin:0px;" size="1" hidefocus enctype="multipart/form-data" name="file" accept="text/csv/doc/pdf/jpg/png"/ >
      <button type="submit" class="btn btn-success start" style="margin-left:15px;" rel="fileupload_operation">
        <i class="icon-upload icon-white"></i>
        <span>上传</span>
      </button>
    </form>
  </div>
  <br>
  <div class="span4" style="margin-left:0px;margin-top:10px;margin-bottom:20px;border: solid #3a87ad 1px;">
    <form method="POST"  action={% url student.views.file_projectcompilation_view pid%} enctype="multipart/form-data">
      {% csrf_token %}
      <span class="label label-info span4" style="padding:0px;text-align: center;margin-left:0px;"><h4>项目汇编上传</h4></span>
      <p>上传的文件请命名为<strong>“项目汇编”</strong></p>
      <input type="file"  style="filter:alpha(opacity=0);padding:0px;border:0px;margin:0px;" size="1" hidefocus enctype="multipart/form-data" name="file" accept="text/csv/doc/pdf/jpg/png"/ >
      <button type="submit" class="btn btn-success start" style="margin-left:15px;" rel="fileupload_operation">
        <i class="icon-upload icon-white"></i>
        <span>上传</span>
      </button>
    </form>
  </div>
  <div class="span4" style="margin-left:10px;margin-top:10px;margin-bottom:20px;border: solid #3a87ad 1px;">
    <form method="POST"  action={% url student.views.file_scoreapplication_view pid%} enctype="multipart/form-data">
      {% csrf_token %}
      <span class="label label-info span4" style="padding:0px;text-align: center;margin-left:0px;"><h4>学分申请表上传</h4></span>
      <p>上传的文件请命名为<strong>“学分申请表”</strong></p>
      <input type="file"  style="filter:alpha(opacity=0);padding:0px;border:0px;margin:0px;" size="1" hidefocus enctype="multipart/form-data" name="file" accept="text/csv/doc/pdf/jpg/png"/ >
      <button type="submit" class="btn btn-success start" style="margin-left:15px;" rel="fileupload_operation">
        <i class="icon-upload icon-white"></i>
        <span>上传</span>
      </button>
    </form>
  </div>
    <div class="span4" style="margin-left:10px;margin-top:10px;margin-bottom:20px;border: solid #3a87ad 1px;">
    <form method="POST"  action={% url student.views.file_other_view pid%} enctype="multipart/form-data">
      {% csrf_token %}
      <span class="label label-info span4" style="padding:0px;text-align: center;margin-left:0px;"><h4>其他附件上传</h4></span>
      <p>上传的文件不能命名为<strong>前五个入口要求的名称</strong></p>
      <input type="file"  style="filter:alpha(opacity=0);padding:0px;border:0px;margin:0px;" size="1" hidefocus enctype="multipart/form-data" name="file" accept="text/csv/doc/pdf/jpg/png"/ >
      <button type="submit" class="btn btn-success start" style="margin-left:15px;" rel="fileupload_operation">
        <i class="icon-upload icon-white"></i>
        <span>上传</span>
      </button>
    </form>
  </div>
<div class="alert alert-success" id="filesupload-tips" >
    <button type="button" class="close" data-dismiss="alert">x</button>
    <h3><strong>文件上传提示!</strong></h3>
    <br/>
    <ul>
        <li>文件名务必按照要求命名，如申报书上传中文件名为<strong>申报书</strong>，上传文件为“<strong>申报书.doc</strong>”</li>
        <li>对于申报书，中期检查表，结题验收表，项目汇编和学分申请表五个入口的上传文件，只允许上传<strong>覆盖原文件</strong>，不提供删除操作</li>
        <li>其他附件上传入口，用来上传与项目有关的介绍图片等，命名时不能与<strong>前五个入口</strong>的<strong>名字相同</strong>，不能为“申报书“，”中期检查表“，”结题验收表“，”项目汇编“和”学分申请表”五个关键字段</li>
        <li>只有文件格式为 <strong> (PDF,JPG,PNG,DOC) </strong>的文件才被允许上传.</li>
        <li>文件大小不要超过<strong>50M</strong></li>
    </ul>
</div>

<script type='text/javascript' src="{{STATIC_URL}}js/student/delete.js"></script>
{% endblock %}
